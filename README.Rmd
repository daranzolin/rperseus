---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

[![Build Status](https://travis-ci.org/daranzolin/rperseus.svg?branch=master)](https://travis-ci.org/daranzolin/rperseus)
[![codecov](https://codecov.io/gh/daranzolin/rperseus/branch/master/graph/badge.svg)](https://codecov.io/gh/daranzolin/rperseus)


Author: David Ranzolin

License: MIT

![](http://www.infobiblio.es/wp-content/uploads/2015/06/perseus-logo.png)

# Description

`rperseus` taps into the API end points at the [Perseus Digital Library's](http://www.perseus.tufts.edu/hopper/) CapiTainS environment. A wealth of primary texts and translations are available, from Homer to Cicero to Boetheius. 

# Installation

`rperseus` is not on CRAN, but can be installed via:

```{r eval = FALSE}
devtools::install_github("daranzolin/rperseus")
```

# Usage

To obtain a particular text, you must first know its full Uniform Resource Name (urn). Urns can be accessed with a call to `get_perseus_catalog`. For example, say I want to see the opening Latin text of Virgil's *Aeneid*:

```{r warning = FALSE, message=FALSE}
library(tidyverse)
library(rperseus)

aeneid_urn <- perseus_catalog %>% 
  filter(groupname == "Virgil",
         label == "Aeneid") %>% 
  .$urn

aeneid <- get_perseus_text(urn = aeneid_urn, language = "lat", text = "1.1")
aeneid$text
```

You can request the English translation by changing the `language` argument:

```{r}
aeneid_eng <- get_perseus_text(aeneid_urn, "eng", "1.1")
aeneid_eng$text
```

As you can see, the amount of text returned for each language is unstable. To get the equivilent amount of Latin from that passage, you could set the text argument to "1.1-1.7". Furthermore, the indexing scheme varies from work to work. The API can require combinations like "1.1-1.5", "1-7", or even "21a-25a". You may have to visit the actual page from time to time to check the scheme.

To obtain the entire work, leave the text argument NULL. Here's how to retrieve the full greek text from Sophocles' underrated *Philoctetes*:

```{r}
philoctetes <- perseus_catalog %>% 
  filter(groupname == "Sophocles",
         label == "Philoctetes") %>% 
  .$urn %>%
  get_perseus_text("grc")
```

And with the text in hand, you can unleash the tidytext tool kit:

```{r}
library(tidytext)

philoctetes %>% 
  unnest_tokens(word, text) %>% 
  count(word, sort = TRUE)
```

While there's no obvious way to filter out the Greek stop words and prepositions or recognize the various moods and tenses of Greek verbs, there's still fun to be had.

